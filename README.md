# App Store Reviews Downloader (Telegram Bot + CLI)

Проект скачивает отзывы App Store для заданного приложения и сохраняет их в Markdown-файл, а также умеет работать как Telegram-бот.

## Возможности

- Telegram-бот:
  - диалог: URL → страна → рейтинг (с кнопками для дефолтов)
  - скачивает отзывы через публичное RSS-API Apple
  - формирует `.md` файл и отправляет его в чат
  - во время скачивания остаётся отзывчивым
  - после отправки удаляет файл локально
- CLI-скрипт (`ratings.py`):
  - делает то же самое через терминал

## Формат выходного файла

Файл создаётся по шаблону:

`{app_id}_reviews_{country.lower()}_{rating_input}.md`

Примеры:

- `1195601592_reviews_us_all.md`
- `1195601592_reviews_ru_5.md`

`rating_input`:
- `1..5` — только отзывы с этой оценкой
- `all` — все оценки

## Структура проекта

- `appstore_reviews.py` — ядро: скачивание отзывов и генерация `.md`
- `bot.py` — Telegram-бот (polling)
- `ratings.py` — CLI-версия
- `requirements.txt` — зависимости
- `.env` — токен бота (не коммитится)

## Установка (локально)

Требуется Python 3.

1) Клонировать репозиторий и перейти в папку проекта:

```bash
git clone <REPO_URL>
cd <REPO_FOLDER>
```

2) Создать и активировать виртуальное окружение:

```bash
python3 -m venv venv
source venv/bin/activate
```

3) Установить зависимости:

```bash
pip install -r requirements.txt
```

## Запуск CLI

```bash
source venv/bin/activate
python ratings.py
```

Скрипт спросит:
- URL приложения (App Store)
- код страны (`us`, `ru`, `de`, ...)
- рейтинг (`1..5` или `all`)

## Запуск Telegram-бота (локально)

1) Создать `.env` в корне проекта:

```env
BOT_TOKEN=ваш_токен_бота
```

2) Запустить:

```bash
source venv/bin/activate
python bot.py
```

В Telegram:
- `/start`
- следовать шагам бота


## Примечания

- Apple RSS-API отдаёт доступный набор отзывов для выбранной страны; скрипт скачивает всё, что отдаёт этот API.
- Логи выводятся в консоль/панель хостинга и помогают понимать, сколько времени заняла загрузка и сколько отзывов скачано.
